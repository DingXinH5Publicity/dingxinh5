<!DOCTYPE html>
<!-- saved from url=(0049)http://magazine.lanshizi.com/M/03/HTML/index.php# -->
<html class="uk-touch"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>
			顶新集团
		</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<meta http-equiv="Cache-Control" content="no-siteapp">
		<!-- CSS -->
		<link rel="stylesheet" href="./style/swiper.min.css">
		<link rel="stylesheet" href="./style/animate.min.css">
		<link rel="stylesheet" href="./style/UI.css">
		<link rel="stylesheet" href="./style/re.css">
		<link rel="stylesheet" href="./style/dxh5.css">
		<link rel="stylesheet" href="./style/mswiper.css">
		<!-- JS -->
		<script src="./js/jquery.min.js"></script>
		<script src="./js/swiper.jquery.min.js"></script>
		<script src="./js/swiper.animate1.0.2.min.js"></script>
		<script src="./js/uikit.min.js"></script>
		<!-- <script src="./js/uikit.js"></script> -->
		<script src="./js/accordion.min.js"></script>
		<script src="./js/fastclick.js"></script>
		<script>
			//声明_czc对象:
			var _czc = _czc || [];
			_czc.push(["_setAccount", "1255200473"]);
		</script>
	</head>
<body style="background:#fff;" class="">
<div class="swiper-container bg swiper-container-horizontal swiper-container-android" id="mainSwiper">
		<div class="swiper-wrapper" style="transition-duration: 0ms; transform: translate3d(0px, 0px, 0px);">
																
		<!-- 首页 内容-->
		<div class="swiper-slide swiper-slide-active" data-hash="slide1">
			<img src="images/1_logo.png" class="top_1" alt="" />
		    <img src="images/1_bot.png" class="bot_1" alt="" />
		</div>
		<!-- 首页 -->
	</div>
	<img src="./images/arrow.png" id="arrow">
</div>
		<div id="bookcontent" class="uk-offcanvas">
			<div class="uk-offcanvas-bar">
				<ul class="uk-nav uk-nav-offcanvas" data-uk-nav="">
					<div class="uk-panel">
						<img src="images/logo.png" alt="" />
					</div>
					<li>
						<a pagecounter="0" class="pagelist border_index">
						</a>
					</li>
					<li>
						<a pagecounter="2" class="pagelist border_shistory">
							<!-- <img src="images/slide_index.png" class="sele" alt="" /> -->
						</a>
					</li>
					<li>
						<a pagecounter="2" class="pagelist border_zhongbang">
							<!-- <img src="images/slide_zhongbang.png" class="sele" alt="" /> -->
						</a>
					</li>
					<li>
						<a pagecounter="3" class="pagelist border_renwu">
							<!-- <img src="images/slide_renwu.png" class="sele" alt="" /> -->
						</a>
					</li>
					<li>
						<a pagecounter="4" class="pagelist border_shunjian">
							<!-- <img src="images/slide_shunjian.png" class="sele" alt="" /> -->
						</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="book swiper-no-swiping" data-uk-offcanvas="{target:&#39;#bookcontent&#39;}">
			<!-- <i class="uk-icon-bookmark-o">
			</i> --> 目录
		</div>
<script>
var page = 0;
var pressX = 0;
var mpage='dingxinPage';
//加载内容
var pageindex = new Array( 
	"0.1.html",
	"0.2.html", 
	"1-1.html",
	"1-2.html", 
	"1-3.html",
	"1-4.html",
	"1-5.html",	
	"1-6.html",	
	"1-7.html",	
	"1-8.html",	
	"1-9.html",
	"2-1.html"
		);
var swiperM = new Swiper('#mainSwiper', {
//	threshold: 10,
	hashnav: true,
//	resistanceRatio: 0.1,
//	freeModeMomentumBounceRatio: 0.1,
	//	effect: 'coverflow',
//	slidesPerView: 'auto',
//	centeredSlides: true,
	//	coverflow: {
	//		rotate: 20,
	//		stretch: 0,
	//		depth: 0,
	//		modifier: 1,
	//		slideShadows: true
	//	},
	onInit: function(swiper) {
		var num = sessionStorage.getItem(mpage);
		if (parseInt(num) != 0 && num != null) {
			jumpToPage(swiper, num);
			swiperAnimateCache(swiper);
			swiperAnimate(swiper);
		} else {
			swiperAnimateCache(swiper);
			swiperAnimate(swiper);
		};
	},
	onSlideChangeEnd: function(swiper) {
		if (swiper.activeIndex >= swiper.previousIndex) {
			page++;
			if (page > pageindex.length - 1) {
				page = pageindex.length - 1;
			};
		} else {
			page--;
			if (page < 0) {
				page = 0
			};
		};
		sessionStorage.setItem(mpage, page);
		_czc.push(﻿["_trackEvent", "Pages", "View", page]);
		console.log(swiper.activeIndex,swiper.previousIndex);
		console.log("正常翻页",page);
		//if(uppage==1){
		//	page--;
		//};
		//if(downpage==1){
		//	page++;
		//};
		$('#arrow').show();
		if (swiper.isEnd && page == pageindex.length - 1) {
			$('#arrow').hide();
		};
		if (swiper.isEnd && page < pageindex.length - 1) {
			if (swiper.slides.length == 3) {
				swiper.removeSlide(0);
			};
			swiper.appendSlide('<div class="swiper-slide" style="width: 100%;text-align: center;padding: 5rem;z-index:999;background:#fff"><i class="uk-icon-spinner uk-icon-spin uk-icon-large"></i> 载入中 ...</div>');
			$.ajax({
				url: pageindex[parseInt(page) + 1],
				success: function(content) {
					swiper.removeSlide(swiper.slides.length - 1);
					swiper.appendSlide(content);
					swiperAnimate(swiper);
				}
			});
		} else if (swiper.isBeginning && page > 0) {
			if (swiper.slides.length == 3) {
				swiper.removeSlide(swiper.slides.length - 1);
			};
			swiper.prependSlide('<div class="swiper-slide" style="width: 100%;text-align: center;padding: 5rem;z-index:999;background:#fff"><i class="uk-icon-spinner uk-icon-spin uk-icon-large"></i> 载入中 ...</div>');
			$.ajax({
				url: pageindex[parseInt(page) - 1],
				success: function(content) {
					swiper.removeSlide(0);
					swiper.prependSlide(content);
					swiperAnimate(swiper);
				}
			});
		} else {
			swiperAnimate(swiper);
		};
	},
	onTouchStart: function(swiper, event) {
		//		pressMonitorX = event.targetTouches[0].pageX;
		if (swiper.slides.length == 1 && event.targetTouches.length == 1) {
			var touch = event.targetTouches[0];
			// 把元素放在手指所在的位置
			pressX = event.targetTouches[0].pageX;
		}
	},
	onTouchEnd: function(swiper) {
		//		if (swiper.touches['currentX'] - pressMonitorX < 0) {
		//			uppage = 0;
		//			downpage = 1;
		//		};
		//		if (swiper.touches['currentX'] - pressMonitorX > 0) {
		//			uppage = 1;
		//			downpage = 0;
		//		};
		if (swiper.slides.length == 1) {
			if (swiper.touches['currentX'] - pressX < -10) {
				if (parseInt(page) + 1 < pageindex.length) {
					swiper.appendSlide('<div class="swiper-slide" style="width: 100%;text-align: center;padding: 5rem;z-index:999;background:#fff"><i class="uk-icon-spinner uk-icon-spin uk-icon-large"></i> 载入中 ...</div>');
					$.ajax({
						url: pageindex[parseInt(page) + 1],
						success: function(content) {
							swiper.removeSlide(1);
							swiper.appendSlide(content);
							swiper.slideNext();
							swiperAnimate(swiper);
						}
					});
				};
			};
			if (swiper.touches['currentX'] - pressX > 10) {
				if (parseInt(page) - 1 >= 0) {
					swiper.prependSlide('<div class="swiper-slide" style="width: 100%;text-align: center;padding: 5rem;z-index:999;background:#fff"><i class="uk-icon-spinner uk-icon-spin uk-icon-large"></i> 载入中 ...</div>');
					$.ajax({
						url: pageindex[parseInt(page) - 1],
						success: function(content) {
							swiper.prependSlide(content);
							swiper.removeSlide(1);
							swiper.slidePrev();
							swiperAnimate(swiper);
						}
					});
				};
			};
		};
	},
});
//目录点击后处理事件
$('.pagelist').click(function(e) {
	_czc.push(﻿["_trackEvent", "Comment", "Click", "Clicked"]);
	var pagecounter = $(this).attr("pagecounter");
	console.log(pagecounter)
	if (pagecounter != page) {
		jumpToPage(swiperM, pagecounter);
		swiperAnimate(swiperM);
	};
	$.UIkit.offcanvas.hide([force = false]);
});

function jumpToPage(objSwiper, jumpIndex) {
	objSwiper.removeAllSlides();
	page = 0;
	objSwiper.appendSlide(
		'<div class="swiper-slide" style="width: 100%;text-align: center;padding: 5rem;z-index:999;background:#fff">'+
			'<i class="uk-icon-spinner uk-icon-spin uk-icon-large"></i> 载入中 ...'+
		'</div>');
	objSwiper.lockSwipes();
	$.ajax({
		url: pageindex[jumpIndex],
		success: function(content) {
			objSwiper.removeSlide(0);
			objSwiper.appendSlide(content);
			page = jumpIndex;
			$('#arrow').show();
			if (page == pageindex.length - 1) {
				$('#arrow').hide();
			};
			sessionStorage.setItem(mpage, page);
			_czc.push(﻿["_trackEvent", "Pages", "View", page]);
			objSwiper.unlockSwipes();
		}
	});
};
window.addEventListener('load', function() {
	FastClick.attach(document.body);
}, false);
</script>
<script src="./js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
	function weixinShare() {
    $.ajax({
        url : '/requestService.go',
        type : 'POST',
        data : {
            action : 'getShareParam',
            shareurl : location.href
        },
        success : function(xml) {
            var R = $(xml).find('Resp');
            var r = R.find('row');
            var appId = r.attr('appId');
            var timestamp = r.attr('timestamp');
            var nonceStr = r.attr('nonceStr');
            var signature = r.attr('signature');
            wx.config({
                debug : false,// 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                appId : appId, // 必填，公众号的唯一标识
                timestamp : timestamp, // 必填，生成签名的时间戳
                nonceStr : nonceStr, // 必填，生成签名的随机串
                signature : signature,// 必填，签名，见附录1
                jsApiList : [ 
                		'onMenuShareTimeline',
                        'onMenuShareAppMessage',
                        'onMenuShareQQ', 
                        'hideMenuItems',
                        'onMenuShareWeibo' ]
            // 必填，需要使用的JS接口列表，所有JS接口列表见附录2

            });
            wx.ready(function() {
                var title = 'Test顶新'; // 分享标题
                var desc = 'Test顶新'; // 分享描述
                var link = location.href; // 分享链接
                var imgUrl = ''; // 分享图标
                var dataUrl = location.href;// 如果type是music或video，则要提供数据链接，默认为空
                // alert(imgUrl)
                // location.host+'/activity/NewVipRegister/img/sharelogo.png'
                wx.onMenuShareAppMessage({//分享给朋友
                    title : title,
                    desc : desc,
                    link : link, // 分享链接
                    imgUrl : imgUrl, // 分享图标
                    type : 'link', // 分享类型,music、video或link，不填默认为link
                    dataUrl : dataUrl, // 如果type是music或video，则要提供数据链接，默认为空
                    success : function() {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel : function() {
                        // 用户取消分享后执行的回调函数
                    }
                });
                wx.hideMenuItems({
				    menuList: ['menuItem:copyUrl','menuItem:originPage','menuItem:editTag',
				    'menuItem:share:email','menuItem:delete',
				    'menuItem:openWithQQBrowser','menuItem:openWithSafari'] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3
				});
                wx.onMenuShareTimeline({//分享到朋友圈
                    title : title, // 分享标题
                    link : link, // 分享链接
                    imgUrl : imgUrl, // 分享图标
                    success : function() {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel : function() {
                        // 用户取消分享后执行的回调函数
                    }
                });

                wx.onMenuShareQQ({//分享到QQ
                    title : title, // 分享标题
                    desc : desc, // 分享描述
                    link : link, // 分享链接
                    imgUrl : imgUrl, // 分享图标
                    success : function() {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel : function() {
                        // 用户取消分享后执行的回调函数
                    }
                });

                wx.onMenuShareWeibo({//分享到腾讯微博
                    title : title, // 分享标题
                    desc : desc, // 分享描述
                    link : link, // 分享链接
                    imgUrl : imgUrl, // 分享图标
                    success : function() {
                        // 用户确认分享后执行的回调函数
                    },
                    cancel : function() {
                        // 用户取消分享后执行的回调函数
                    }
                });
                // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中。
                });
            }
            });
        }
        // weixinShare()
</script>
<script>
	/*
 * 注意：
 * 1. 所有的JS接口只能在公众号绑定的域名下调用，公众号开发者需要先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。
 * 2. 如果发现在 Android 不能分享自定义内容，请到官网下载最新的包覆盖安装，Android 自定义分享接口需升级至 6.0.2.58 版本及以上。
 * 3. 常见问题及完整 JS-SDK 文档地址：http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html
 *
 * 开发中遇到问题详见文档“附录5-常见错误及解决办法”解决，如仍未能解决可通过以下渠道反馈：
 * 邮箱地址：weixin-open@qq.com
 * 邮件主题：【微信JS-SDK反馈】具体问题
 * 邮件内容说明：用简明的语言描述问题所在，并交代清楚遇到该问题的场景，可附上截屏图片，微信团队会尽快处理你的反馈。
 */
wx.config({
    debug: false,
    appId: 'wxb8dd23217f4a3780',
    timestamp: 1491313877,
    nonceStr: 'x2gBFGgZQb8AgH43',
    signature: 'c985d13aa35b03684805096b256af3239fc1266e',
    jsApiList: [
    'onMenuShareTimeline',
    'onMenuShareAppMessage',
    'onMenuShareQQ',
    'onMenuShareWeibo',
    ]
  });

wx.ready(function () {
	var sharedata={
		title: 'M周刊第3期：像恋爱一样去跑步',
		desc: '吴晓波频道旗下产品，带着走的管理实战教材。',
		link: 'http://magazine.lanshizi.com/M/03/index.php',
		imgUrl: 'http://magazine.lanshizi.com/M/mlogo.png',
	};
wx.onMenuShareTimeline(sharedata);
wx.onMenuShareAppMessage(sharedata);
wx.onMenuShareQQ(sharedata);
wx.onMenuShareWeibo(sharedata);
});
</script>
</body>
</html>